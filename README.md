# V Panel - é«˜æ€§èƒ½ä»£ç†æœåŠ¡å™¨ç®¡ç†é¢æ¿

<div align="center">

[![Build Status](https://github.com/chengchnegcheng/Vpanel/workflows/Build%20and%20Release/badge.svg)](https://github.com/chengchnegcheng/Vpanel/actions)
[![Go Report Card](https://goreportcard.com/badge/github.com/chengchnegcheng/Vpanel)](https://goreportcard.com/report/github.com/chengchnegcheng/Vpanel)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![GitHub release](https://img.shields.io/github/release/chengchnegcheng/Vpanel.svg)](https://github.com/chengchnegcheng/Vpanel/releases)
[![Go Version](https://img.shields.io/github/go-mod/go-version/chengchnegcheng/Vpanel)](https://github.com/chengchnegcheng/Vpanel)

  <p>
    <a href="#åŠŸèƒ½ç‰¹ç‚¹">åŠŸèƒ½ç‰¹ç‚¹</a> â€¢
    <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
    <a href="#docker-éƒ¨ç½²">Docker éƒ¨ç½²</a> â€¢
    <a href="#åŠŸèƒ½çŠ¶æ€">åŠŸèƒ½çŠ¶æ€</a> â€¢
    <a href="#å®¢æˆ·ç«¯æ¨è">å®¢æˆ·ç«¯æ¨è</a> â€¢
    <a href="#å¼€å‘æŒ‡å—">å¼€å‘æŒ‡å—</a>
  </p>
</div>

V Panel æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„é«˜æ€§èƒ½ä»£ç†æœåŠ¡å™¨ç®¡ç†é¢æ¿ï¼ŒåŸºäº Xray-coreï¼Œæ”¯æŒå¤šç§ä»£ç†åè®®ã€‚æä¾›å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ã€æµé‡ç»Ÿè®¡ã€è¯ä¹¦ç®¡ç†ç­‰åŠŸèƒ½ï¼Œä»¥åŠç›´è§‚çš„ Web ç®¡ç†ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

### æ ¸å¿ƒåŠŸèƒ½
- **å¤šåè®®æ”¯æŒ**: VMess, VLESS, Trojan, Shadowsocks
- **ç”¨æˆ·ç®¡ç†**: è®¤è¯æˆæƒã€æµé‡é™åˆ¶ã€çŠ¶æ€ç›‘æ§ã€å¤šçº§æƒé™
- **æµé‡ç®¡ç†**: å®æ—¶ç»Ÿè®¡ã€æ¯æ—¥ç»Ÿè®¡ã€æµé‡é™åˆ¶å’Œè­¦å‘Š
- **è¯ä¹¦ç®¡ç†**: è‡ªåŠ¨ SSL è¯ä¹¦ç”³è¯·å’Œæ›´æ–°ã€å¤šåŸŸåæ”¯æŒ
- **Xray ç®¡ç†**: ç‰ˆæœ¬åˆ‡æ¢ã€è¿œç¨‹æ›´æ–°ã€è¿è¡ŒçŠ¶æ€ç›‘æ§
- **ç³»ç»Ÿç®¡ç†**: å®Œæ•´æ—¥å¿—ç³»ç»Ÿã€ç³»ç»ŸçŠ¶æ€ç›‘æ§ã€é…ç½®ç®¡ç†
- **è§’è‰²æƒé™**: è§’è‰²ç®¡ç†ã€æƒé™åˆ†é…
- **ä»£ç†æ§åˆ¶**: å¯åœæ§åˆ¶ã€æ‰¹é‡æ“ä½œ

### å¤šæœåŠ¡å™¨ç®¡ç†
- **èŠ‚ç‚¹ç®¡ç†**: æ³¨å†Œã€ç¼–è¾‘ã€åˆ é™¤è¿œç¨‹ Xray èŠ‚ç‚¹ï¼Œæ”¯æŒ IP/åŸŸåã€æ ‡ç­¾ã€åœ°åŒºåˆ†ç±»
- **èŠ‚ç‚¹åˆ†ç»„**: æŒ‰åœ°åŒºæˆ–ç”¨é€”ç»„ç»‡èŠ‚ç‚¹ï¼Œæ”¯æŒåˆ†ç»„çº§åˆ«é…ç½®
- **å¥åº·æ£€æŸ¥**: è‡ªåŠ¨å®šæœŸæ£€æµ‹èŠ‚ç‚¹çŠ¶æ€ï¼ˆTCPã€APIã€Xray è¿›ç¨‹ï¼‰ï¼Œå¯é…ç½®æ£€æŸ¥é—´éš”
- **è´Ÿè½½å‡è¡¡**: æ”¯æŒè½®è¯¢ã€æœ€å°‘è¿æ¥ã€åŠ æƒã€åœ°ç†ä½ç½®ç­‰å¤šç§ç­–ç•¥
- **æ•…éšœè½¬ç§»**: èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨è¿ç§»ç”¨æˆ·åˆ°å¥åº·èŠ‚ç‚¹ï¼Œæ”¯æŒåŒç»„ä¼˜å…ˆå’Œè·¨ç»„è½¬ç§»
- **é…ç½®åŒæ­¥**: ä»£ç†é…ç½®è‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰ç›¸å…³èŠ‚ç‚¹ï¼Œæ”¯æŒæ‰‹åŠ¨è§¦å‘
- **Node Agent**: è½»é‡çº§ä»£ç†ç¨‹åºï¼Œéƒ¨ç½²åœ¨èŠ‚ç‚¹ä¸Šæ‰§è¡Œå‘½ä»¤å’Œä¸ŠæŠ¥æŒ‡æ ‡

## å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Docker 20+ (æ¨èï¼Œä¸€é”®éƒ¨ç½²)
- æˆ– Go 1.23+ (æºç æ„å»º)
- æˆ– Node.js 20+ (å‰ç«¯å¼€å‘)

### æ–¹å¼ä¸€ï¼šDocker ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼ï¼Œä½¿ç”¨äº¤äº’å¼èœå•ï¼š

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/chengchnegcheng/Vpanel.git
cd Vpanel

# 2. å¯åŠ¨èœå•ç®¡ç†è„šæœ¬
./vpanel.sh
```

**èœå•åŠŸèƒ½ï¼š**
- ğŸ³ Docker éƒ¨ç½²ç®¡ç†ï¼ˆå¯åŠ¨/åœæ­¢/é‡å¯/æ—¥å¿—/çŠ¶æ€/æ¸…ç†ï¼‰
- ğŸ’» æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆç¼–è¯‘/è¿è¡Œ/æµ‹è¯•/å‰ç«¯å¼€å‘ï¼‰
- âš™ï¸ é…ç½®ç®¡ç†ï¼ˆåˆ›å»º/ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼‰
- ğŸ” ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥ï¼ˆæ£€æŸ¥ä¾èµ–å®‰è£…çŠ¶æ€ï¼‰

**å¯åŠ¨æˆåŠŸåï¼š**
- ğŸŒ è®¿é—®åœ°å€ï¼šç»ˆç«¯ä¼šæ˜¾ç¤ºéšæœºç”Ÿæˆçš„ç«¯å£
- ğŸ‘¤ é»˜è®¤ç”¨æˆ·åï¼š`admin`
- ğŸ”‘ é»˜è®¤å¯†ç ï¼š`admin123`ï¼ˆæˆ–æŸ¥çœ‹ `deployments/docker/.env` æ–‡ä»¶ï¼‰

> ğŸ’¡ é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨ç”Ÿæˆéšæœºç«¯å£ï¼ˆ10000-65000ï¼‰ï¼Œç«¯å£å·ä¿å­˜åœ¨ `.env` æ–‡ä»¶ä¸­

**ä¼ ç»Ÿå‘½ä»¤æ–¹å¼ï¼ˆä»ç„¶æ”¯æŒï¼‰ï¼š**
```bash
./deployments/scripts/start.sh start    # å¯åŠ¨æœåŠ¡
./deployments/scripts/start.sh stop     # åœæ­¢æœåŠ¡
./deployments/scripts/start.sh restart  # é‡å¯æœåŠ¡
./deployments/scripts/start.sh logs     # æŸ¥çœ‹æ—¥å¿—
./deployments/scripts/start.sh status   # æŸ¥çœ‹çŠ¶æ€
```

### æ–¹å¼äºŒï¼šä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/chengchnegcheng/Vpanel.git
cd Vpanel

# æ„å»ºï¼ˆå‰ç«¯ + åç«¯ï¼‰
./scripts/build.sh all

# å¯åŠ¨æœåŠ¡
./scripts/start.sh start
```

**å¯åŠ¨æˆåŠŸåï¼š**
- ğŸŒ è®¿é—®åœ°å€ï¼šç»ˆç«¯ä¼šæ˜¾ç¤ºéšæœºç”Ÿæˆçš„ç«¯å£
- ğŸ‘¤ é»˜è®¤ç”¨æˆ·åï¼š`admin`
- ğŸ”‘ é»˜è®¤å¯†ç ï¼š`admin123`

**å…¶ä»–å‘½ä»¤ï¼š**
```bash
./scripts/start.sh stop     # åœæ­¢æœåŠ¡
./scripts/start.sh restart  # é‡å¯æœåŠ¡
./scripts/start.sh logs     # æŸ¥çœ‹æ—¥å¿—
./scripts/start.sh status   # æŸ¥çœ‹çŠ¶æ€
./scripts/start.sh run      # å‰å°è¿è¡Œï¼ˆå¼€å‘è°ƒè¯•ï¼‰
```

### æ–¹å¼ä¸‰ï¼šæœ¬åœ°å¼€å‘

**æ¨èä½¿ç”¨èœå•æ–¹å¼ï¼š**
```bash
# å¯åŠ¨èœå•ï¼Œé€‰æ‹©"æœ¬åœ°å¼€å‘ç¯å¢ƒ"
./vpanel.sh
```

**ä¼ ç»Ÿå‘½ä»¤æ–¹å¼ï¼š**
```bash
# å®‰è£…ä¾èµ–
./deployments/scripts/dev.sh install

# å¯åŠ¨åç«¯
./deployments/scripts/dev.sh start

# å¯åŠ¨å‰ç«¯ï¼ˆå¦å¼€ç»ˆç«¯ï¼‰
./deployments/scripts/dev.sh frontend
```

### è®¿é—®åœ°å€è¯´æ˜

V Panel æä¾›ä¸¤å¥—ç‹¬ç«‹çš„ç•Œé¢ï¼Œç®¡ç†åå°å’Œç”¨æˆ·é—¨æˆ·å®Œå…¨åˆ†ç¦»ï¼š

| ç•Œé¢ | è®¿é—®åœ°å€ | è¯´æ˜ |
|------|---------|------|
| **ç”¨æˆ·é—¨æˆ·** | `http://localhost:ç«¯å£/` | é»˜è®¤å…¥å£ï¼Œæ™®é€šç”¨æˆ·è®¿é—® |
| **ç®¡ç†åå°** | `http://localhost:ç«¯å£/login` | ç®¡ç†å‘˜ç™»å½•å…¥å£ï¼ˆéšè—ï¼‰ |

> ğŸ’¡ ç«¯å£å·åœ¨é¦–æ¬¡å¯åŠ¨æ—¶éšæœºç”Ÿæˆï¼Œå¯åœ¨ç»ˆç«¯è¾“å‡ºæˆ– `.env` æ–‡ä»¶ä¸­æŸ¥çœ‹

#### ç”¨æˆ·é—¨æˆ· (User Portal)
- è®¿é—® `http://localhost:ç«¯å£/` è‡ªåŠ¨è·³è½¬åˆ° `/user/login`ï¼ˆç”¨æˆ·é—¨æˆ·ç™»å½•é¡µï¼‰
- è®¿é—® `http://localhost:ç«¯å£/user/register` è¿›è¡Œæ³¨å†Œ
- ç™»å½•åè¿›å…¥ç”¨æˆ·ä»ªè¡¨æ¿ `/user/dashboard`
- ç”¨æˆ·å¯æŸ¥çœ‹èŠ‚ç‚¹ã€è®¢é˜…ã€è®¢å•ã€å·¥å•ç­‰

#### ç®¡ç†åå° (Admin)
- è®¿é—® `http://localhost:ç«¯å£/login` ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼ˆæ³¨æ„ï¼šä¸æ˜¯ `/user/login`ï¼‰
- ç™»å½•åè‡ªåŠ¨è¿›å…¥ç®¡ç†ä»ªè¡¨ç›˜ `/admin/dashboard`
- å¯ç®¡ç†ç”¨æˆ·ã€èŠ‚ç‚¹ã€å¥—é¤ã€è®¢å•ã€ç³»ç»Ÿè®¾ç½®ç­‰
- **ç®¡ç†åå°åœ°å€ç›¸å¯¹éšè—ï¼Œæé«˜å®‰å…¨æ€§**

### âš ï¸ é¦–æ¬¡ç™»å½•æ³¨æ„äº‹é¡¹

1. **ç®¡ç†å‘˜**ï¼šè®¿é—® `http://localhost:ç«¯å£/login`ï¼Œä½¿ç”¨ `admin` / `admin123` ç™»å½•
2. **æ™®é€šç”¨æˆ·**ï¼šè®¿é—® `http://localhost:ç«¯å£/` æˆ– `/user/register` æ³¨å†Œè´¦å·
3. **é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**
4. å»ºè®®ä¿®æ”¹ JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

> ğŸ’¡ **æç¤º**: ç®¡ç†å‘˜ç™»å½•åœ°å€æ˜¯ `/login`ï¼Œç”¨æˆ·ç™»å½•åœ°å€æ˜¯ `/user/login`ï¼Œä¸¤è€…ä¸åŒï¼

## Docker éƒ¨ç½²è¯¦ç»†è¯´æ˜

ä¸Šé¢çš„ä¸€é”®éƒ¨ç½²å·²ç»æ˜¯æœ€ç®€å•çš„æ–¹å¼ã€‚å¦‚æœéœ€è¦æ›´å¤šæ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š

### ä½¿ç”¨ Docker Compose (æ‰‹åŠ¨æ–¹å¼)

```bash
# è¿›å…¥éƒ¨ç½²ç›®å½•
cd deployments/docker

# å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®
cp .env.example .env

# ç¼–è¾‘é…ç½® (ä¿®æ”¹å¯†ç ç­‰)
vim .env

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### ä½¿ç”¨ Docker å‘½ä»¤

```bash
# æ„å»ºé•œåƒ
./scripts/docker-build.sh build

# è¿è¡Œå®¹å™¨ï¼ˆç«¯å£ä¼šè‡ªåŠ¨åˆ†é…ï¼‰
docker run -d \
  --name v-panel \
  -p éšæœºç«¯å£:8080 \
  -v v-panel-data:/app/data \
  -e V_JWT_SECRET=your-secret \
  -e V_ADMIN_PASS=your-password \
  v-panel:latest
```

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `V_SERVER_PORT` | æœåŠ¡ç«¯å£ï¼ˆç•™ç©ºè‡ªåŠ¨ç”Ÿæˆï¼‰ | éšæœº 10000-65000 |
| `V_SERVER_MODE` | è¿è¡Œæ¨¡å¼ (debug/release) | release |
| `V_JWT_SECRET` | JWT å¯†é’¥ | - |
| `V_ADMIN_USER` | ç®¡ç†å‘˜ç”¨æˆ·å | admin |
| `V_ADMIN_PASS` | ç®¡ç†å‘˜å¯†ç  | admin123 |
| `V_LOG_LEVEL` | æ—¥å¿—çº§åˆ« | info |
| `V_DB_PATH` | æ•°æ®åº“è·¯å¾„ | /app/data/v.db |

## Node Agent éƒ¨ç½²

Node Agent æ˜¯éƒ¨ç½²åœ¨è¿œç¨‹èŠ‚ç‚¹æœåŠ¡å™¨ä¸Šçš„è½»é‡çº§ä»£ç†ç¨‹åºï¼Œè´Ÿè´£ä¸ Panel é€šä¿¡ã€æ‰§è¡Œå‘½ä»¤å’Œä¸ŠæŠ¥æŒ‡æ ‡ã€‚

### éƒ¨ç½²æ­¥éª¤

1. åœ¨ Panel ç®¡ç†ç•Œé¢æ·»åŠ èŠ‚ç‚¹ï¼Œè·å–èŠ‚ç‚¹ Token
2. åœ¨èŠ‚ç‚¹æœåŠ¡å™¨ä¸Šéƒ¨ç½² Agentï¼š

```bash
# ä¸‹è½½ Agent
wget https://github.com/chengchnegcheng/Vpanel/releases/latest/download/v-agent-linux-amd64

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x v-agent-linux-amd64

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > agent.yaml << EOF
panel:
  address: "https://your-panel-address:ç«¯å£"
  token: "your-node-token"
  
agent:
  port: 8443
  
xray:
  binary: "/usr/local/bin/xray"
  config: "/etc/xray/config.json"
EOF

# è¿è¡Œ Agent
./v-agent-linux-amd64 -config agent.yaml
```

### Agent é…ç½®è¯´æ˜

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `panel.address` | Panel æœåŠ¡å™¨åœ°å€ | - |
| `panel.token` | èŠ‚ç‚¹è®¤è¯ Token | - |
| `agent.port` | Agent ç›‘å¬ç«¯å£ | 8443 |
| `xray.binary` | Xray å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ | /usr/local/bin/xray |
| `xray.config` | Xray é…ç½®æ–‡ä»¶è·¯å¾„ | /etc/xray/config.json |

### ä½¿ç”¨ systemd ç®¡ç†

```bash
# åˆ›å»º systemd æœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/v-agent.service << EOF
[Unit]
Description=V Panel Node Agent
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/v-agent -config /etc/v-agent/agent.yaml
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF

# å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
systemctl daemon-reload
systemctl enable v-agent
systemctl start v-agent
```

## è®¢é˜…ç³»ç»Ÿ

V Panel æä¾›å®Œæ•´çš„è®¢é˜…é“¾æ¥ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å®¢æˆ·ç«¯æ ¼å¼è‡ªåŠ¨æ£€æµ‹å’Œç”Ÿæˆã€‚

### æ”¯æŒçš„è®¢é˜…æ ¼å¼

| æ ¼å¼ | å®¢æˆ·ç«¯ | è¯´æ˜ |
|------|--------|------|
| V2rayN | v2rayN, v2rayNG | Base64 ç¼–ç é“¾æ¥åˆ—è¡¨ |
| Clash | Clash, ClashX | YAML é…ç½®æ–‡ä»¶ |
| Clash Meta | Clash Meta | æ”¯æŒ Realityã€XTLS |
| Sing-box | Sing-box | JSON é…ç½®æ–‡ä»¶ |
| Shadowrocket | Shadowrocket | Base64 ç¼–ç é“¾æ¥ |
| Surge | Surge | é…ç½®æ–‡ä»¶æ ¼å¼ |
| Quantumult X | Quantumult X | é…ç½®æ–‡ä»¶æ ¼å¼ |

### è®¢é˜…é“¾æ¥ç‰¹æ€§

- **è‡ªåŠ¨æ ¼å¼æ£€æµ‹**: æ ¹æ® User-Agent è‡ªåŠ¨è¿”å›å¯¹åº”æ ¼å¼
- **çŸ­é“¾æ¥æ”¯æŒ**: ç”Ÿæˆ 8 å­—ç¬¦çŸ­é“¾æ¥ä¾¿äºåˆ†äº«
- **ä»¤ç‰Œé‡æ–°ç”Ÿæˆ**: æ”¯æŒé‡æ–°ç”Ÿæˆè®¢é˜…ä»¤ç‰Œï¼Œæ—§ä»¤ç‰Œç«‹å³å¤±æ•ˆ
- **è®¿é—®ç»Ÿè®¡**: è®°å½•è®¢é˜…è®¿é—®æ¬¡æ•°å’Œæœ€åè®¿é—®æ—¶é—´
- **å“åº”å¤´ä¿¡æ¯**: åŒ…å«æµé‡ä½¿ç”¨ã€åˆ°æœŸæ—¶é—´ç­‰ä¿¡æ¯

### è®¢é˜…å“åº”å¤´

| å“åº”å¤´ | è¯´æ˜ |
|--------|------|
| `Subscription-Userinfo` | æµé‡ä½¿ç”¨ä¿¡æ¯ (upload, download, total, expire) |
| `Profile-Update-Interval` | å»ºè®®æ›´æ–°é—´éš”ï¼ˆå°æ—¶ï¼‰ |
| `Content-Disposition` | é…ç½®æ–‡ä»¶å |

## IP é™åˆ¶ç³»ç»Ÿ

V Panel æä¾›å®Œå–„çš„ IP é™åˆ¶åŠŸèƒ½ï¼Œé˜²æ­¢è´¦å·å…±äº«å’Œæ»¥ç”¨ã€‚

### åŠŸèƒ½ç‰¹æ€§

- **å¹¶å‘ IP é™åˆ¶**: é™åˆ¶åŒæ—¶åœ¨çº¿çš„è®¾å¤‡æ•°é‡
- **ç™½åå•/é»‘åå•**: æ”¯æŒ IP å’Œ CIDR èŒƒå›´
- **åœ°ç†ä½ç½®é™åˆ¶**: åŸºäº IP åœ°ç†ä½ç½®çš„è®¿é—®æ§åˆ¶
- **è‡ªåŠ¨é»‘åå•**: å¤šæ¬¡å¤±è´¥å°è¯•è‡ªåŠ¨å°ç¦
- **è®¾å¤‡ç®¡ç†**: ç”¨æˆ·å¯æŸ¥çœ‹å’Œè¸¢å‡ºåœ¨çº¿è®¾å¤‡
- **è®¢é˜… IP é™åˆ¶**: é™åˆ¶è®¢é˜…é“¾æ¥çš„è®¿é—® IP æ•°é‡

### é…ç½®é€‰é¡¹

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `max_concurrent_ips` | æœ€å¤§å¹¶å‘ IP æ•° | 3 |
| `ip_inactive_timeout` | ä¸æ´»è·ƒ IP è¶…æ—¶æ—¶é—´ | 30 åˆ†é’Ÿ |
| `auto_blacklist_threshold` | è‡ªåŠ¨é»‘åå•é˜ˆå€¼ | 10 æ¬¡ |
| `subscription_ip_limit` | è®¢é˜…é“¾æ¥ IP é™åˆ¶ | 5 |

## å•†ä¸šåŒ–ç³»ç»Ÿ

V Panel æä¾›å®Œæ•´çš„å•†ä¸šåŒ–åŠŸèƒ½ï¼Œæ”¯æŒå¥—é¤é”€å”®ã€æ”¯ä»˜å¤„ç†å’Œç”¨æˆ·ç®¡ç†ã€‚

### å¥—é¤ç®¡ç†

- **å¥—é¤ç±»å‹**: æ”¯æŒæŒ‰æœˆã€æŒ‰å­£ã€æŒ‰å¹´ç­‰å¤šç§å‘¨æœŸ
- **æµé‡é…ç½®**: å¯è®¾ç½®æµé‡é™åˆ¶æˆ–æ— é™æµé‡
- **ä»·æ ¼è®¾ç½®**: æ”¯æŒå¤šå¸ç§å®šä»·
- **è¯•ç”¨åŠŸèƒ½**: æ”¯æŒå¥—é¤è¯•ç”¨ï¼Œå¯é…ç½®è¯•ç”¨æ—¶é•¿

### æ”¯ä»˜ç³»ç»Ÿ

| æ”¯ä»˜æ–¹å¼ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| æ”¯ä»˜å® | âœ… æ”¯æŒ | æ‰«ç æ”¯ä»˜ã€ç½‘é¡µæ”¯ä»˜ |
| å¾®ä¿¡æ”¯ä»˜ | âœ… æ”¯æŒ | æ‰«ç æ”¯ä»˜ã€JSAPI |
| ä½™é¢æ”¯ä»˜ | âœ… æ”¯æŒ | ä½¿ç”¨è´¦æˆ·ä½™é¢ |
| ç¤¼å“å¡ | âœ… æ”¯æŒ | å…‘æ¢ç å……å€¼ |

### è¥é”€åŠŸèƒ½

- **ä¼˜æƒ åˆ¸**: æ”¯æŒæŠ˜æ‰£å’Œå›ºå®šé‡‘é¢ä¼˜æƒ 
- **é‚€è¯·ç³»ç»Ÿ**: é‚€è¯·ç ã€æ¨èå¥–åŠ±ã€ä½£é‡‘è®¡ç®—
- **ç¤¼å“å¡**: æ‰¹é‡ç”Ÿæˆã€è´­ä¹°ã€å…‘æ¢

### è®¢é˜…ç®¡ç†

- **å¥—é¤å‡é™çº§**: æ”¯æŒæŒ‰æ¯”ä¾‹è®¡ç®—å·®ä»·
- **è®¢é˜…æš‚åœ**: ç”¨æˆ·å¯æš‚åœè®¢é˜…ï¼Œåˆ°æœŸè‡ªåŠ¨æ¢å¤
- **è‡ªåŠ¨ç»­è´¹**: æ”¯æŒä½™é¢è‡ªåŠ¨æ‰£æ¬¾

## åŠŸèƒ½çŠ¶æ€

### åç«¯ç®¡ç†åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| ç”¨æˆ·è®¤è¯ (JWT) | âœ… å·²å®Œæˆ | ç™»å½•ã€ç™»å‡ºã€ä»¤ç‰Œåˆ·æ–° |
| ç”¨æˆ·ç®¡ç† | âœ… å·²å®Œæˆ | CRUDã€å¯ç”¨/ç¦ç”¨ã€å¯†ç é‡ç½® |
| è§’è‰²æƒé™ | âœ… å·²å®Œæˆ | è§’è‰²ç®¡ç†ã€æƒé™åˆ†é… |
| ä»£ç†ç®¡ç† | âœ… å·²å®Œæˆ | å¤šåè®®ã€å¯åœæ§åˆ¶ã€æ‰¹é‡æ“ä½œ |
| æµé‡ç»Ÿè®¡ | âœ… å·²å®Œæˆ | Dashboardã€åè®®ç»Ÿè®¡ã€ç”¨æˆ·ç»Ÿè®¡ |
| è¯ä¹¦ç®¡ç† | âœ… å·²å®Œæˆ | SSL ç”³è¯·ã€ç»­æœŸã€éªŒè¯ |
| Xray ç®¡ç† | âœ… å·²å®Œæˆ | å¯åœã€é…ç½®ã€ç‰ˆæœ¬ç®¡ç† |
| æ—¥å¿—ç³»ç»Ÿ | âœ… å·²å®Œæˆ | æŸ¥è¯¢ã€å¯¼å‡ºã€æ¸…ç† |
| ç³»ç»Ÿè®¾ç½® | âœ… å·²å®Œæˆ | é…ç½®ç®¡ç†ã€å¤‡ä»½æ¢å¤ |
| èŠ‚ç‚¹ç®¡ç† | âœ… å·²å®Œæˆ | èŠ‚ç‚¹æ³¨å†Œã€ç¼–è¾‘ã€åˆ é™¤ã€çŠ¶æ€ç›‘æ§ |
| èŠ‚ç‚¹åˆ†ç»„ | âœ… å·²å®Œæˆ | åˆ†ç»„ CRUDã€æˆå‘˜ç®¡ç†ã€åˆ†ç»„ç»Ÿè®¡ |
| å¥åº·æ£€æŸ¥ | âœ… å·²å®Œæˆ | è‡ªåŠ¨æ£€æµ‹ã€çŠ¶æ€è½¬æ¢ã€å†å²è®°å½• |
| è´Ÿè½½å‡è¡¡ | âœ… å·²å®Œæˆ | å¤šç­–ç•¥æ”¯æŒã€å®¹é‡é™åˆ¶ã€ç”¨æˆ·åˆ†é… |
| æ•…éšœè½¬ç§» | âœ… å·²å®Œæˆ | è‡ªåŠ¨è¿ç§»ã€åŒç»„ä¼˜å…ˆã€è·¨ç»„è½¬ç§» |
| é…ç½®åŒæ­¥ | âœ… å·²å®Œæˆ | è‡ªåŠ¨åŒæ­¥ã€æ‰‹åŠ¨è§¦å‘ã€çŠ¶æ€è¿½è¸ª |
| Node Agent | âœ… å·²å®Œæˆ | èŠ‚ç‚¹ä»£ç†ç¨‹åºã€æŒ‡æ ‡ä¸ŠæŠ¥ã€å‘½ä»¤æ‰§è¡Œ |
| è®¢é˜…é“¾æ¥ | âœ… å·²å®Œæˆ | å¤šæ ¼å¼è®¢é˜…ã€è‡ªåŠ¨æ£€æµ‹ã€çŸ­é“¾æ¥ |
| IP é™åˆ¶ | âœ… å·²å®Œæˆ | å¹¶å‘é™åˆ¶ã€ç™½åå•/é»‘åå•ã€åœ°ç†ä½ç½®é™åˆ¶ |
| æ•°æ®åº“å¤‡ä»½ | ğŸ”œ å¾…è§„åˆ’ | è‡ªåŠ¨å¤‡ä»½æ¢å¤ |

### å•†ä¸šåŒ–åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| å¥—é¤ç®¡ç† | âœ… å·²å®Œæˆ | å¥—é¤ CRUDã€ä»·æ ¼è®¾ç½®ã€æµé‡/æ—¶é•¿é…ç½® |
| è®¢å•ç³»ç»Ÿ | âœ… å·²å®Œæˆ | è®¢å•åˆ›å»ºã€çŠ¶æ€ç®¡ç†ã€è¿‡æœŸå¤„ç† |
| æ”¯ä»˜ç½‘å…³ | âœ… å·²å®Œæˆ | æ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜ã€å›è°ƒå¤„ç† |
| ä½™é¢ç³»ç»Ÿ | âœ… å·²å®Œæˆ | å……å€¼ã€æ‰£æ¬¾ã€äº¤æ˜“è®°å½• |
| ä¼˜æƒ åˆ¸ | âœ… å·²å®Œæˆ | æŠ˜æ‰£/å›ºå®šé‡‘é¢ã€ä½¿ç”¨é™åˆ¶ã€æ‰¹é‡ç”Ÿæˆ |
| é‚€è¯·ç³»ç»Ÿ | âœ… å·²å®Œæˆ | é‚€è¯·ç ã€æ¨èå…³ç³»ã€ä½£é‡‘è®¡ç®— |
| å‘ç¥¨ç®¡ç† | âœ… å·²å®Œæˆ | å‘ç¥¨ç”Ÿæˆã€PDF ä¸‹è½½ |
| è´¢åŠ¡æŠ¥è¡¨ | âœ… å·²å®Œæˆ | æ”¶å…¥ç»Ÿè®¡ã€è®¢å•åˆ†æ |
| å¥—é¤è¯•ç”¨ | âœ… å·²å®Œæˆ | è¯•ç”¨æ¿€æ´»ã€è¿‡æœŸæ£€æŸ¥ã€è½¬åŒ–ç»Ÿè®¡ |
| å¥—é¤å‡é™çº§ | âœ… å·²å®Œæˆ | å‡çº§ä»·æ ¼è®¡ç®—ã€é™çº§è°ƒåº¦ |
| æ”¯ä»˜é‡è¯• | âœ… å·²å®Œæˆ | å¤±è´¥é‡è¯•ã€æ”¯ä»˜æ–¹å¼åˆ‡æ¢ |
| å¤šå¸ç§ | âœ… å·²å®Œæˆ | æ±‡ç‡è½¬æ¢ã€è´§å¸è‡ªåŠ¨æ£€æµ‹ |
| è®¢é˜…æš‚åœ | âœ… å·²å®Œæˆ | æš‚åœ/æ¢å¤ã€æ—¶é•¿é™åˆ¶ã€è‡ªåŠ¨æ¢å¤ |
| ç¤¼å“å¡ | âœ… å·²å®Œæˆ | åˆ›å»ºã€è´­ä¹°ã€å…‘æ¢ã€æ‰¹é‡ç”Ÿæˆ |

### ç”¨æˆ·å‰å°åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| ç”¨æˆ·æ³¨å†Œ/ç™»å½• | âœ… å·²å®Œæˆ | é‚®ç®±éªŒè¯ã€é‚€è¯·ç ã€2FA |
| ç”¨æˆ·ä»ªè¡¨æ¿ | âœ… å·²å®Œæˆ | æµé‡ä½¿ç”¨ã€åˆ°æœŸæ—¶é—´ã€å¿«æ·æ“ä½œ |
| èŠ‚ç‚¹åˆ—è¡¨ | âœ… å·²å®Œæˆ | è¿‡æ»¤æ’åºã€å»¶è¿Ÿæµ‹è¯• |
| è®¢é˜…ç®¡ç† | âœ… å·²å®Œæˆ | è®¢é˜…é“¾æ¥ã€QRç ã€æ ¼å¼é€‰æ‹© |
| å®¢æˆ·ç«¯ä¸‹è½½ | âœ… å·²å®Œæˆ | æŒ‰å¹³å°åˆ†ç»„ã€æ¨èæ ‡è®° |
| ä¸ªäººè®¾ç½® | âœ… å·²å®Œæˆ | èµ„æ–™ä¿®æ”¹ã€å®‰å…¨è®¾ç½®ã€2FA |
| ä½¿ç”¨ç»Ÿè®¡ | âœ… å·²å®Œæˆ | æµé‡å›¾è¡¨ã€æ•°æ®å¯¼å‡º |
| å…¬å‘Šä¸­å¿ƒ | âœ… å·²å®Œæˆ | å…¬å‘Šåˆ—è¡¨ã€å·²è¯»çŠ¶æ€ |
| å·¥å•ç³»ç»Ÿ | âœ… å·²å®Œæˆ | åˆ›å»ºã€å›å¤ã€çŠ¶æ€è·Ÿè¸ª |
| å¸®åŠ©ä¸­å¿ƒ | âœ… å·²å®Œæˆ | æ–‡ç« åˆ—è¡¨ã€æœç´¢ã€åˆ†ç±» |
| è®¾å¤‡ç®¡ç† | âœ… å·²å®Œæˆ | åœ¨çº¿è®¾å¤‡ã€è¸¢å‡ºè®¾å¤‡ |
| ç§»åŠ¨ç«¯é€‚é… | âœ… å·²å®Œæˆ | å“åº”å¼å¸ƒå±€ã€åº•éƒ¨å¯¼èˆª |
| ä¸»é¢˜åˆ‡æ¢ | âœ… å·²å®Œæˆ | æ·±è‰²/æµ…è‰²ä¸»é¢˜ |

## å®¢æˆ·ç«¯æ¨è

### Windows
| å®¢æˆ·ç«¯ | ä¸‹è½½åœ°å€ | ç‰¹ç‚¹ |
|--------|---------|------|
| **v2rayN** (æ¨è) | [GitHub](https://github.com/2dust/v2rayN/releases) | ç•Œé¢ç®€æ´ã€æ”¯æŒè®¢é˜…ã€è‡ªåŠ¨æ›´æ–° |
| Clash for Windows | [GitHub](https://github.com/Fndroid/clash_for_windows_pkg/releases) | è§„åˆ™åˆ†æµã€è®¢é˜…è½¬æ¢ |

### macOS
| å®¢æˆ·ç«¯ | ä¸‹è½½åœ°å€ | ç‰¹ç‚¹ |
|--------|---------|------|
| **V2rayU** (æ¨è) | [GitHub](https://github.com/yanue/V2rayU/releases) | åŸç”Ÿåº”ç”¨ã€èœå•æ å¿«é€Ÿåˆ‡æ¢ |
| ClashX | [GitHub](https://github.com/yichengchen/clashX/releases) | è§„åˆ™åˆ†æµã€ç®€æ´æ˜“ç”¨ |

### Linux
| å®¢æˆ·ç«¯ | ä¸‹è½½åœ°å€ | ç‰¹ç‚¹ |
|--------|---------|------|
| **v2rayA** (æ¨è) | [GitHub](https://github.com/v2rayA/v2rayA/releases) | Web ç•Œé¢ã€é€æ˜ä»£ç† |
| Qv2ray | [GitHub](https://github.com/Qv2ray/Qv2ray/releases) | å›¾å½¢åŒ–ç•Œé¢ã€æ’ä»¶æ”¯æŒ |

### Android
| å®¢æˆ·ç«¯ | ä¸‹è½½åœ°å€ | ç‰¹ç‚¹ |
|--------|---------|------|
| **v2rayNG** (æ¨è) | [GitHub](https://github.com/2dust/v2rayNG/releases) | å¼€æºå…è´¹ã€åˆ†åº”ç”¨ä»£ç† |
| Clash for Android | [GitHub](https://github.com/Kr328/ClashForAndroid/releases) | è§„åˆ™åˆ†æµ |

### iOS
| å®¢æˆ·ç«¯ | ä¸‹è½½åœ°å€ | ç‰¹ç‚¹ |
|--------|---------|------|
| **Shadowrocket** (æ¨è) | App Store ($2.99) | ç¨³å®šå¯é ã€è§„åˆ™åˆ†æµ |
| Quantumult X | App Store ($7.99) | åŠŸèƒ½å¼ºå¤§ã€è„šæœ¬æ”¯æŒ |
| Surge | App Store ($49.99) | ä¸“ä¸šçº§ã€å¼ºå¤§è§„åˆ™å¼•æ“ |

## å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒ

```bash
# åç«¯å¼€å‘
go run ./cmd/v/main.go -config configs/config.yaml

# å‰ç«¯å¼€å‘
cd web
npm install
npm run dev
```

### æ„å»ºå‘½ä»¤

```bash
# å®Œæ•´æ„å»º
./scripts/build.sh all

# ä»…æ„å»ºåç«¯
./scripts/build.sh backend

# ä»…æ„å»ºå‰ç«¯
./scripts/build.sh frontend

# å¤šå¹³å°æ„å»º
./scripts/build.sh platforms

# è¿è¡Œæµ‹è¯•
./scripts/build.sh test
```

### æµ‹è¯•

```bash
# è¿è¡Œåç«¯æµ‹è¯•
go test -v ./...

# è¿è¡Œå‰ç«¯æµ‹è¯•
cd web
npm run test:unit

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
go test -cover ./...
```

## æ•…éšœæ’é™¤

### æ•°æ®åº“å’Œ API é—®é¢˜

å¦‚æœé‡åˆ° API è¿”å› 500 æˆ– 503 é”™è¯¯ï¼Œå¯èƒ½æ˜¯æ•°æ®åº“è¿ç§»æœªæ­£ç¡®æ‰§è¡Œã€‚

#### è¯Šæ–­æ­¥éª¤

1. **æ£€æŸ¥æ•°æ®åº“çŠ¶æ€**
```bash
./scripts/check-db.sh
```

2. **æµ‹è¯• API ç«¯ç‚¹**
```bash
# ä¸éœ€è¦è®¤è¯çš„æµ‹è¯•
./scripts/test-api.sh

# éœ€è¦ admin token çš„å®Œæ•´æµ‹è¯•
./scripts/test-api.sh http://localhost:ä½ çš„ç«¯å£ YOUR_ADMIN_TOKEN
```

#### å¸¸è§é—®é¢˜

**é—®é¢˜ 1: IP é™åˆ¶ API è¿”å› 503/500**

åŸå› ï¼šIP é™åˆ¶ç›¸å…³çš„æ•°æ®åº“è¡¨æœªåˆ›å»º

è§£å†³æ–¹æ¡ˆï¼š
```bash
# æ–¹æ¡ˆ A: æ‰‹åŠ¨æ‰§è¡Œè¿ç§»ï¼ˆå¿«é€Ÿï¼‰
./scripts/fix-migrations.sh

# æ–¹æ¡ˆ B: é‡å¯æœåŠ¡ï¼ˆè‡ªåŠ¨æ‰§è¡Œè¿ç§»ï¼‰
./vpanel.sh  # é€‰æ‹©åœæ­¢ç„¶åå¯åŠ¨

# æ–¹æ¡ˆ C: Docker é‡æ–°éƒ¨ç½²
./deployments/scripts/start.sh restart
```

**é—®é¢˜ 2: æ•°æ®åº“æ–‡ä»¶æŸå**

æ£€æŸ¥æ•°æ®åº“å®Œæ•´æ€§ï¼š
```bash
sqlite3 data/v.db "PRAGMA integrity_check;"
```

å¦‚æœæŸåï¼Œæ¢å¤å¤‡ä»½ï¼š
```bash
cp data/v.db.backup data/v.db
```

**é—®é¢˜ 3: è¿ç§»å¤±è´¥**

æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/app.log

# æˆ– Docker æ—¥å¿—
docker logs v-panel
```

#### è¯Šæ–­å·¥å…·

| å·¥å…· | ç”¨é€” | å‘½ä»¤ |
|------|------|------|
| æ•°æ®åº“æ£€æŸ¥ | æ£€æŸ¥è¡¨ç»“æ„å’Œè¿ç§»çŠ¶æ€ | `./scripts/check-db.sh` |
| è¿ç§»ä¿®å¤ | æ‰‹åŠ¨æ‰§è¡Œ SQL è¿ç§» | `./scripts/fix-migrations.sh` |
| API æµ‹è¯• | æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹ | `./scripts/test-api.sh` |

### æ—¥å¿—æŸ¥çœ‹

```bash
# åº”ç”¨æ—¥å¿—
tail -f logs/app.log

# Docker æ—¥å¿—
docker logs -f v-panel

# æŸ¥çœ‹ç‰¹å®šé”™è¯¯
grep -i "error" logs/app.log
```

### æ€§èƒ½é—®é¢˜

å¦‚æœé‡åˆ°æ€§èƒ½é—®é¢˜ï¼š

1. æ£€æŸ¥æ•°æ®åº“å¤§å°å’Œç´¢å¼•
2. æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—
3. ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨

```bash
# æ•°æ®åº“å¤§å°
du -h data/v.db

# ç³»ç»Ÿèµ„æº
top
```

## é¡¹ç›®ç»“æ„

```
v/
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ v/                 # ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ agent/             # Node Agent å…¥å£
â”œâ”€â”€ internal/               # ç§æœ‰åŒ…
â”‚   â”œâ”€â”€ api/               # API å±‚ (handlers, middleware, routes)
â”‚   â”œâ”€â”€ agent/             # Node Agent å®ç°
â”‚   â”œâ”€â”€ auth/              # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ cache/             # ç¼“å­˜å±‚ (å†…å­˜ã€Redis)
â”‚   â”œâ”€â”€ commercial/        # å•†ä¸šåŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ balance/       # ä½™é¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ commission/    # ä½£é‡‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ coupon/        # ä¼˜æƒ åˆ¸æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ currency/      # å¤šå¸ç§æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ giftcard/      # ç¤¼å“å¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ invite/        # é‚€è¯·æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ invoice/       # å‘ç¥¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ order/         # è®¢å•æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ pause/         # è®¢é˜…æš‚åœæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ payment/       # æ”¯ä»˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ plan/          # å¥—é¤æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ planchange/    # å¥—é¤å‡é™çº§æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ refund/        # é€€æ¬¾æœåŠ¡
â”‚   â”‚   â””â”€â”€ trial/         # è¯•ç”¨æœåŠ¡
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“å±‚ (migrations, repository)
â”‚   â”œâ”€â”€ ip/                # IP é™åˆ¶æ¨¡å—
â”‚   â”œâ”€â”€ log/               # æ—¥å¿—æœåŠ¡
â”‚   â”œâ”€â”€ logger/            # æ—¥å¿—æ¨¡å—
â”‚   â”œâ”€â”€ monitor/           # ç›‘æ§æ¨¡å—
â”‚   â”œâ”€â”€ node/              # èŠ‚ç‚¹ç®¡ç† (æœåŠ¡ã€å¥åº·æ£€æŸ¥ã€è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»)
â”‚   â”œâ”€â”€ notification/      # é€šçŸ¥æœåŠ¡
â”‚   â”œâ”€â”€ portal/            # ç”¨æˆ·é—¨æˆ·
â”‚   â”‚   â”œâ”€â”€ announcement/  # å…¬å‘ŠæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ auth/          # é—¨æˆ·è®¤è¯
â”‚   â”‚   â”œâ”€â”€ help/          # å¸®åŠ©ä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ node/          # é—¨æˆ·èŠ‚ç‚¹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ stats/         # ç»Ÿè®¡æœåŠ¡
â”‚   â”‚   â””â”€â”€ ticket/        # å·¥å•æœåŠ¡
â”‚   â”œâ”€â”€ proxy/             # ä»£ç†åè®® (vmess, vless, trojan, shadowsocks)
â”‚   â”œâ”€â”€ server/            # HTTP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ settings/          # ç³»ç»Ÿè®¾ç½®
â”‚   â”œâ”€â”€ subscription/      # è®¢é˜…ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ generators/    # æ ¼å¼ç”Ÿæˆå™¨ (v2rayn, clash, singbox ç­‰)
â”‚   â””â”€â”€ xray/              # Xray ç®¡ç†
â”œâ”€â”€ pkg/                    # å…¬å…±åŒ…
â”‚   â”œâ”€â”€ errors/            # é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ sanitizer/         # æ•°æ®æ¸…ç†
â”œâ”€â”€ configs/               # é…ç½®æ¨¡æ¿
â”œâ”€â”€ deployments/           # éƒ¨ç½²æ–‡ä»¶ (docker, scripts)
â”œâ”€â”€ scripts/               # æ„å»ºè„šæœ¬
â”œâ”€â”€ web/                   # å‰ç«¯ä»£ç 
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ api/           # API æ¨¡å—
â”‚       â”œâ”€â”€ components/    # ç»„ä»¶
â”‚       â”œâ”€â”€ stores/        # Pinia çŠ¶æ€ç®¡ç†
â”‚       â”œâ”€â”€ views/         # é¡µé¢è§†å›¾
â”‚       â””â”€â”€ router/        # è·¯ç”±é…ç½®
â””â”€â”€ data/                  # æ•°æ®ç›®å½•
```

## API æ–‡æ¡£

### è®¤è¯
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/refresh` - åˆ·æ–°ä»¤ç‰Œ
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·

### ä»£ç†ç®¡ç†
- `GET /api/proxies` - è·å–ä»£ç†åˆ—è¡¨
- `POST /api/proxies` - åˆ›å»ºä»£ç†
- `GET /api/proxies/:id` - è·å–ä»£ç†è¯¦æƒ…
- `PUT /api/proxies/:id` - æ›´æ–°ä»£ç†
- `DELETE /api/proxies/:id` - åˆ é™¤ä»£ç†
- `GET /api/proxies/:id/link` - è·å–åˆ†äº«é“¾æ¥

### ç³»ç»Ÿ
- `GET /api/system/info` - ç³»ç»Ÿä¿¡æ¯
- `GET /api/system/status` - ç³»ç»ŸçŠ¶æ€
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /ready` - å°±ç»ªæ£€æŸ¥

### èŠ‚ç‚¹ç®¡ç†
- `GET /api/nodes` - è·å–èŠ‚ç‚¹åˆ—è¡¨
- `POST /api/nodes` - åˆ›å»ºèŠ‚ç‚¹
- `GET /api/nodes/:id` - è·å–èŠ‚ç‚¹è¯¦æƒ…
- `PUT /api/nodes/:id` - æ›´æ–°èŠ‚ç‚¹
- `DELETE /api/nodes/:id` - åˆ é™¤èŠ‚ç‚¹
- `POST /api/nodes/:id/token` - ç”Ÿæˆ/è½®æ¢èŠ‚ç‚¹ Token
- `DELETE /api/nodes/:id/token` - æ’¤é”€èŠ‚ç‚¹ Token
- `POST /api/nodes/:id/sync` - åŒæ­¥èŠ‚ç‚¹é…ç½®
- `GET /api/nodes/:id/health` - è·å–èŠ‚ç‚¹å¥åº·çŠ¶æ€
- `GET /api/nodes/:id/stats` - è·å–èŠ‚ç‚¹ç»Ÿè®¡ä¿¡æ¯

### èŠ‚ç‚¹åˆ†ç»„
- `GET /api/node-groups` - è·å–åˆ†ç»„åˆ—è¡¨
- `POST /api/node-groups` - åˆ›å»ºåˆ†ç»„
- `GET /api/node-groups/:id` - è·å–åˆ†ç»„è¯¦æƒ…
- `PUT /api/node-groups/:id` - æ›´æ–°åˆ†ç»„
- `DELETE /api/node-groups/:id` - åˆ é™¤åˆ†ç»„
- `POST /api/node-groups/:id/members` - æ·»åŠ åˆ†ç»„æˆå‘˜
- `DELETE /api/node-groups/:id/members/:nodeId` - ç§»é™¤åˆ†ç»„æˆå‘˜

### Node Agent
- `POST /api/agent/register` - Agent æ³¨å†Œ
- `POST /api/agent/heartbeat` - Agent å¿ƒè·³
- `POST /api/agent/metrics` - ä¸ŠæŠ¥æŒ‡æ ‡
- `GET /api/agent/config` - è·å–é…ç½®

### è®¢é˜…ç®¡ç†
- `GET /api/subscription/link` - è·å–è®¢é˜…é“¾æ¥
- `GET /api/subscription/info` - è·å–è®¢é˜…ä¿¡æ¯
- `POST /api/subscription/regenerate` - é‡æ–°ç”Ÿæˆè®¢é˜…ä»¤ç‰Œ
- `GET /api/subscription/:token` - è·å–è®¢é˜…å†…å®¹ï¼ˆå…¬å¼€ï¼‰
- `GET /s/:short_code` - çŸ­é“¾æ¥è®¿é—®è®¢é˜…ï¼ˆå…¬å¼€ï¼‰

### IP é™åˆ¶
- `GET /api/admin/ip-restrictions/stats` - IP é™åˆ¶ç»Ÿè®¡
- `GET /api/admin/users/:id/online-ips` - ç”¨æˆ·åœ¨çº¿ IP
- `POST /api/admin/users/:id/kick-ip` - è¸¢å‡ºç”¨æˆ· IP
- `GET /api/admin/ip-whitelist` - è·å–ç™½åå•
- `POST /api/admin/ip-whitelist` - æ·»åŠ ç™½åå•
- `DELETE /api/admin/ip-whitelist/:id` - åˆ é™¤ç™½åå•
- `GET /api/admin/ip-blacklist` - è·å–é»‘åå•
- `POST /api/admin/ip-blacklist` - æ·»åŠ é»‘åå•
- `DELETE /api/admin/ip-blacklist/:id` - åˆ é™¤é»‘åå•
- `GET /api/user/devices` - ç”¨æˆ·è®¾å¤‡åˆ—è¡¨
- `POST /api/user/devices/:ip/kick` - ç”¨æˆ·è¸¢å‡ºè®¾å¤‡

### å•†ä¸šåŒ–ç³»ç»Ÿ
- `GET /api/plans` - è·å–å¥—é¤åˆ—è¡¨
- `GET /api/plans/:id` - è·å–å¥—é¤è¯¦æƒ…
- `POST /api/orders` - åˆ›å»ºè®¢å•
- `GET /api/orders` - è·å–è®¢å•åˆ—è¡¨
- `GET /api/orders/:id` - è·å–è®¢å•è¯¦æƒ…
- `POST /api/orders/:id/cancel` - å–æ¶ˆè®¢å•
- `POST /api/payments/create` - åˆ›å»ºæ”¯ä»˜
- `POST /api/payments/callback/:gateway` - æ”¯ä»˜å›è°ƒ
- `GET /api/balance` - è·å–ä½™é¢
- `GET /api/balance/transactions` - äº¤æ˜“è®°å½•
- `POST /api/coupons/validate` - éªŒè¯ä¼˜æƒ åˆ¸
- `GET /api/invite/code` - è·å–é‚€è¯·ç 
- `GET /api/invite/referrals` - è·å–æ¨èåˆ—è¡¨
- `GET /api/commissions` - è·å–ä½£é‡‘åˆ—è¡¨
- `GET /api/invoices` - è·å–å‘ç¥¨åˆ—è¡¨
- `GET /api/invoices/:id/download` - ä¸‹è½½å‘ç¥¨
- `GET /api/trial` - è·å–è¯•ç”¨çŠ¶æ€
- `POST /api/trial` - æ¿€æ´»è¯•ç”¨
- `POST /api/plan-change/calculate` - è®¡ç®—å‡é™çº§ä»·æ ¼
- `POST /api/plan-change/upgrade` - å‡çº§å¥—é¤
- `POST /api/plan-change/downgrade` - é™çº§å¥—é¤
- `POST /api/subscription/pause` - æš‚åœè®¢é˜…
- `POST /api/subscription/resume` - æ¢å¤è®¢é˜…
- `POST /api/gift-cards/redeem` - å…‘æ¢ç¤¼å“å¡

### ç”¨æˆ·é—¨æˆ·
- `POST /api/portal/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/portal/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/portal/auth/logout` - ç”¨æˆ·ç™»å‡º
- `POST /api/portal/auth/forgot-password` - å¿˜è®°å¯†ç 
- `POST /api/portal/auth/reset-password` - é‡ç½®å¯†ç 
- `GET /api/portal/dashboard` - ä»ªè¡¨æ¿æ•°æ®
- `GET /api/portal/nodes` - èŠ‚ç‚¹åˆ—è¡¨
- `GET /api/portal/nodes/:id/ping` - èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•
- `GET /api/portal/tickets` - å·¥å•åˆ—è¡¨
- `POST /api/portal/tickets` - åˆ›å»ºå·¥å•
- `GET /api/portal/tickets/:id` - å·¥å•è¯¦æƒ…
- `POST /api/portal/tickets/:id/reply` - å›å¤å·¥å•
- `GET /api/portal/announcements` - å…¬å‘Šåˆ—è¡¨
- `GET /api/portal/announcements/:id` - å…¬å‘Šè¯¦æƒ…
- `POST /api/portal/announcements/:id/read` - æ ‡è®°å·²è¯»
- `GET /api/portal/stats` - ä½¿ç”¨ç»Ÿè®¡
- `GET /api/portal/help` - å¸®åŠ©æ–‡ç« åˆ—è¡¨
- `GET /api/portal/help/:slug` - å¸®åŠ©æ–‡ç« è¯¦æƒ…

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](.github/CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## é—®é¢˜åé¦ˆ

- ä½¿ç”¨ [Bug Report](https://github.com/chengchnegcheng/Vpanel/issues/new?template=bug_report.yml) æŠ¥å‘Š Bug
- ä½¿ç”¨ [Feature Request](https://github.com/chengchnegcheng/Vpanel/issues/new?template=feature_request.yml) æå‡ºæ–°åŠŸèƒ½

## ç‰¹åˆ«é¸£è°¢

- [Xray-core](https://github.com/XTLS/Xray-core) - æ ¸å¿ƒä»£ç†å¼•æ“
- [Vue.js](https://vuejs.org/) - å‰ç«¯æ¡†æ¶
- [Gin](https://gin-gonic.com/) - Web æ¡†æ¶
- [GORM](https://gorm.io/) - ORM æ¡†æ¶

## è®¸å¯è¯

[MIT License](LICENSE)
